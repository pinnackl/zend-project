<div class="gridster">
    <ul>
    </ul>
</div>

</div>

<script src="<?php echo $this->basePath('lib/gridster/dist/jquery.gridster.js') ?>"></script>

<script type="text/javascript">
    var gridster;
    serialization = <?= $page->structure ?>;
    $array = <?= $page->block_element ?>;

    $(function(){

        gridster = $(".gridster ul").gridster({
            widget_base_dimensions: [140, 200],
            widget_margins: [5, 5],
            min_cols: 6,
            max_cols:12,
            draggable: {ignore_dragging: true}
        }).data('gridster');

        placementObject();

        function placementObject() {
            gridster.remove_all_widgets();
            $.each(serialization, function() {
                $html ='<li />';
                $w = gridster.add_widget($html, this.size_x, this.size_y, this.col, this.row);
                $w.attr('data-id', this.id)

            });
            $.each($array, function() {
                $wi = $(".gridster > ul li").filter('[data-id="'+ this.element_block_id+'"]').attr('data-id', this.element_block_id);
                $(".gridster > ul li").filter('[data-id="'+ this.element_block_id+'"]').attr('data-element-id', this.element_id)
                applyStyleToElement(this.element_type, $wi)
            })
        }

        function applyStyleToElement($type, $wi) {

            switch($type) {
                case 'menu':
                    $wi.append("MenuName: "+"<?= $menus[0]->getMenuName() ?>");
                    break;
                case 'article':
                    var $title = '<?= $articles[0]->getArtcTitle() ?>';
                    console.log($title)
                    $wi.append(
                        "<div class='row' style='height: 100%;padding:5px'>" +
                            "<img style='width: 100%;height:35%' src='<?php echo $this->basePath('/img/sample-1.jpg') ?>'>" +
                            "<span>" + $title + "</span>" +
                            "<div class='card-content'>" +
                                "<p><?php echo substr( $articles[0]->getArtcIntrotext(),0,35)?>...</p>" +
                            "</div>" +
                        "</div>")
                    break;
            }
        }
    });
</script>

